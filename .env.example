# =============================================================================
# Issue-to-PR Environment Configuration
# =============================================================================
# Copy this file to .env.local and fill in your values.
# Variables marked [Required] must be set for the app to function.
# Variables marked [Optional] have sensible defaults or enable extra features.
#
# For workers, see: apps/workers/workflow-workers/.env.example
# For E2E tests, see: __tests__/.env.e2e.example
# =============================================================================

# =============================================================================
# NEXTAUTH / AUTHENTICATION
# =============================================================================

# [Required] Secret used to encrypt session tokens
# Generate with: openssl rand -base64 32
AUTH_SECRET=

# [Optional] Base URL for authentication callbacks
# Defaults to http://localhost:3000 in development
AUTH_URL=http://localhost:3000

# =============================================================================
# GITHUB APP CONFIGURATION
# =============================================================================
# These credentials come from your GitHub App settings.
# Create a GitHub App at: https://github.com/settings/apps/new

# [Required] GitHub App ID (from app settings page)
GITHUB_APP_ID=

# [Required] Path to the GitHub App private key file (.pem)
# Download from GitHub App settings > Private keys
GITHUB_APP_PRIVATE_KEY_PATH=/path/to/your-app.private-key.pem

# [Required] GitHub App OAuth credentials (for user authentication)
# Found in GitHub App settings > OAuth credentials
GITHUB_APP_CLIENT_ID=
GITHUB_APP_CLIENT_SECRET=

# [Required] Webhook secret for verifying GitHub webhook payloads
# Set this in GitHub App settings > Webhook > Secret
# Generate with: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=

# [Optional] GitHub App installation ID
# Usually extracted from webhook payloads; only needed for specific auth flows
GITHUB_APP_INSTALLATION_ID=

# =============================================================================
# DATABASE - NEO4J
# =============================================================================
# Neo4j is used for storing user settings, workflow data, and relationships.
# Run locally with: pnpm docker:up

# [Required] Neo4j connection URI
# Local default: bolt://localhost:7687
NEO4J_URI=bolt://localhost:7687

# [Required] Neo4j username
NEO4J_USER=neo4j

# [Required] Neo4j password
NEO4J_PASSWORD=

# =============================================================================
# REDIS - JOB QUEUES (BULLMQ)
# =============================================================================
# Redis is used for BullMQ job queues (workflow processing).
# Run locally with: pnpm docker:up

# [Required] Redis connection URL for BullMQ job queues
# Local default: redis://localhost:6379
REDIS_URL=redis://localhost:6379

# [Optional] Custom queue name for job isolation (useful for testing)
# Default: workflow-jobs
BULLMQ_QUEUE_NAME=

# =============================================================================
# REDIS - UPSTASH (SESSION CACHING)
# =============================================================================
# Upstash Redis is used for session/token caching via REST API.
# Create a database at: https://console.upstash.com/

# [Required for production] Upstash Redis REST URL
UPSTASH_REDIS_REST_URL=

# [Required for production] Upstash Redis REST token
UPSTASH_REDIS_REST_TOKEN=

# =============================================================================
# LLM API KEYS
# =============================================================================
# API keys for AI/LLM providers. At least one is required for workflows.

# [Required] OpenAI API key for GPT models
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# [Optional] Demo API key for users without their own key (platform use only)
OPENAI_DEMO_API_KEY=

# [Optional] Anthropic API key for Claude models
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# =============================================================================
# APPLICATION URLs
# =============================================================================

# [Required] Public base URL of the application
# Used for OAuth callbacks, webhook URLs, and tracking links
# Development: http://localhost:3000
# Production: https://your-domain.com
NEXT_PUBLIC_BASE_URL=http://localhost:3000

# [Required for frontend] GitHub App slug for installation links
# This is the URL-friendly name of your GitHub App
NEXT_PUBLIC_GITHUB_APP_SLUG=your-github-app-slug

# =============================================================================
# DOCKER / AGENT CONTAINERS
# =============================================================================
# Configuration for running agent workloads in Docker containers.

# [Optional] Base Docker image for agent containers
# Default: ghcr.io/youngchingjui/agent-base
AGENT_BASE_IMAGE=ghcr.io/youngchingjui/agent-base

# [Optional] Container TTL in hours before auto-cleanup
# Default: 24
CONTAINER_TTL_HOURS=24

# =============================================================================
# OBSERVABILITY - LANGFUSE
# =============================================================================
# Langfuse provides LLM observability, tracing, and analytics.
# Create an account at: https://langfuse.com/

# [Optional] Langfuse public key
LANGFUSE_PUBLIC_KEY=

# [Optional] Langfuse secret key
LANGFUSE_SECRET_KEY=

# [Optional] Langfuse API base URL
# Default: https://cloud.langfuse.com (EU) or https://us.cloud.langfuse.com (US)
LANGFUSE_BASEURL=https://us.cloud.langfuse.com

# =============================================================================
# OBSERVABILITY - ERROR TELEMETRY
# =============================================================================

# [Optional] Webhook URL for error notifications (e.g., Slack webhook)
# If not set, errors are logged to console only
ERROR_WEBHOOK_URL=

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# [Optional] Enable timing/performance logging
# Set to "1" to enable detailed timing logs for debugging
ENABLE_TIMING=

# [Optional] Smee.io URL for local webhook forwarding
# Create a channel at: https://smee.io/new
# Used with: pnpm smee
SMEE_URL=

# =============================================================================
# STRIPE (BILLING)
# =============================================================================
# Stripe integration for payment processing.

# [Optional] Stripe publishable key (for frontend)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=

# [Optional] Stripe secret key (for backend)
STRIPE_SECRET_KEY=

# =============================================================================
# LEGACY / DEPRECATED
# =============================================================================
# These variables are deprecated but may still be referenced in some code paths.

# [Deprecated] Old GitHub OAuth credentials (use GitHub App instead)
# GITHUB_OAUTH_ID=
# GITHUB_OAUTH_SECRET=

# [Deprecated] Flag to switch between OAuth and GitHub App auth
# USE_GITHUB_APP=true
